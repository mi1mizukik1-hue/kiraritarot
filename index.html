<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ã‹ã‚“ãŸã‚“ã‚¿ãƒ­ãƒƒãƒˆ</title>
<style>
body{
  font-family: sans-serif;
  text-align:center;
  background:#fff7fb;
}
input{
  width:80%;
  padding:10px;
  font-size:16px;
}
button{
  margin-top:10px;
  padding:12px 20px;
  font-size:16px;
  border:none;
  background:#ff7bb0;
  color:white;
  border-radius:8px;
}
img{
  margin-top:15px;
  width:200px;
  border-radius:12px;
}
#result{
  margin-top:12px;
  font-size:18px;
}
</style>
</head>

<body>

<h2>è³ªå•ã‚’å…¥åŠ›ã—ã¦ã­ğŸ”®</h2>
<input id="question" placeholder="ä¾‹ï¼šã‚ã®äººã®æ°—æŒã¡ã¯ï¼Ÿ">
<br>
<button onclick="draw()">ã‚«ãƒ¼ãƒ‰ã‚’å¼•ã</button>

<div id="result"></div>
<img id="cardImg">

<script>
const cards = [
  {name:"æ„šè€…", img:"https://via.placeholder.com/300x500?text=The+Fool"},
  {name:"é­”è¡“å¸«", img:"https://via.placeholder.com/300x500?text=Magician"},
  {name:"å¥³æ•™çš‡", img:"https://via.placeholder.com/300x500?text=High+Priestess"},
  {name:"å¥³å¸", img:"https://via.placeholder.com/300x500?text=Empress"},
  {name:"æ‹äºº", img:"https://via.placeholder.com/300x500?text=Lovers"},
  {name:"é‹å‘½ã®è¼ª", img:"https://via.placeholder.com/300x500?text=Wheel+of+Fortune"},
  {name:"å¤ªé™½", img:"https://via.placeholder.com/300x500?text=Sun"},
  {name:"ä¸–ç•Œ", img:"https://via.placeholder.com/300x500?text=World"}
];

function draw(){
  const q = document.getElementById("question").value;
  if(q === ""){
    alert("è³ªå•ã‚’å…¥ã‚Œã¦ã­ğŸ”®");
    return;
  }

  const today = new Date().toDateString();
  const key = "tarot_" + today + "_" + q;

  let saved = localStorage.getItem(key);

  if(!saved){
    const card = cards[Math.floor(Math.random()*cards.length)];
    const reverse = Math.random() < 0.5 ? "æ­£ä½ç½®" : "é€†ä½ç½®";

    saved = JSON.stringify({card:card, reverse:reverse});
    localStorage.setItem(key, saved);
  }

  const data = JSON.parse(saved);

  document.getElementById("result").innerHTML =
    "ã‚ãªãŸã®è³ªå•ï¼š<br><b>"+q+"</b><br><br>" +
    "å¼•ã„ãŸã‚«ãƒ¼ãƒ‰ã¯â€¦<br><b>"+data.card.name+"ï¼ˆ"+data.reverse+"ï¼‰</b>âœ¨";

  const img = document.getElementById("cardImg");
  img.src = data.card.img;

  if(data.reverse === "é€†ä½ç½®"){
    img.style.transform = "rotate(180deg)";
  }else{
    img.style.transform = "rotate(0deg)";
  }
}
</script>

</body>
</html>
