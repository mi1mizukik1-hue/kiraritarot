<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ã‹ã‚“ãŸã‚“ã‚¿ãƒ­ãƒƒãƒˆ</title>
<style>
body{
  font-family: sans-serif;
  text-align:center;
  background:#fff7fb;
}
input{
  width:80%;
  padding:10px;
  font-size:16px;
}
button{
  margin-top:10px;
  padding:12px 20px;
  font-size:16px;
  border:none;
  background:#ff7bb0;
  color:white;
  border-radius:8px;
}
img{
  margin-top:15px;
  width:200px;
  border-radius:12px;
}
#result{
  margin-top:12px;
  font-size:18px;
}
</style>
</head>

<body>

<h2>è³ªå•ã‚’å…¥åŠ›ã—ã¦ã­ğŸ”®</h2>
<input id="question" placeholder="ä¾‹ï¼šã‚ã®äººã®æ°—æŒã¡ã¯ï¼Ÿ">
<br>
<button onclick="draw()">ã‚«ãƒ¼ãƒ‰ã‚’å¼•ã</button>

<div id="result"></div>
<img id="cardImg">

<script>
const cards = [
 {name:"æ„šè€…", img:"cards/fool.png", text:"æ–°ã—ã„å§‹ã¾ã‚Šã€‚ç›´æ„Ÿã‚’ä¿¡ã˜ã¦OKã€‚"},
 {name:"é­”è¡“å¸«", img:"cards/magician.png", text:"é¡˜ã„ã‚’å¶ãˆã‚‹åŠ›ãŒã‚ã‚‹ã€‚è¡Œå‹•ãŒéµã€‚"},
 {name:"å¥³æ•™çš‡", img:"cards/priestess.png", text:"ç­”ãˆã¯å¿ƒã®ä¸­ã«ã€‚ç„¦ã‚‰ãªãã¦ã„ã„ã€‚"},
 {name:"å¥³å¸", img:"cards/empress.png", text:"æ„›ã•ã‚Œé‹UPã€‚é­…åŠ›ãŒé«˜ã¾ã‚‹æ™‚ã€‚"},
 {name:"æ‹äºº", img:"cards/lovers.png", text:"æ‹æ„›é‹æœ€é«˜æ½®ã€‚é¸æŠãŒæœªæ¥ã‚’æ±ºã‚ã‚‹ã€‚"},
 {name:"é‹å‘½ã®è¼ª", img:"cards/wheel.png", text:"é‹å‘½ãŒå‹•ãæ—¥ã€‚ãƒãƒ£ãƒ³ã‚¹åˆ°æ¥ã€‚"},
 {name:"å¤ªé™½", img:"cards/sun.png", text:"å¤§æˆåŠŸã®ã‚µã‚¤ãƒ³ã€‚è‡ªä¿¡æŒã£ã¦OKã€‚"},
 {name:"ä¸–ç•Œ", img:"cards/world.png", text:"é¡˜ã„ãŒå¶ã†å®Œæˆå½¢ã€‚æœ€é«˜ã®çµæœã€‚"}
];

function draw(){
  const q = document.getElementById("question").value;
  if(q === ""){
    alert("è³ªå•ã‚’å…¥ã‚Œã¦ã­ğŸ”®");
    return;
  }

  const today = new Date().toDateString();
  const key = "tarot_" + today + "_" + q;

  let saved = localStorage.getItem(key);

  if(!saved){
    const card = cards[Math.floor(Math.random()*cards.length)];
    const reverse = Math.random() < 0.5 ? "æ­£ä½ç½®" : "é€†ä½ç½®";

    saved = JSON.stringify({card:card, reverse:reverse});
    localStorage.setItem(key, saved);
  }

  const data = JSON.parse(saved);

  document.getElementById("result").innerHTML =
    "ã‚ãªãŸã®è³ªå•ï¼š<br><b>"+q+"</b><br><br>" +
    "å¼•ã„ãŸã‚«ãƒ¼ãƒ‰ã¯â€¦<br><b>"+data.card.name+"ï¼ˆ"+data.reverse+"ï¼‰</b>âœ¨"+ "<br><br>" + data.card.text;

  const img = document.getElementById("cardImg");
  img.src = data.card.img;

  if(data.reverse === "é€†ä½ç½®"){
    img.style.transform = "rotate(180deg)";
  }else{
    img.style.transform = "rotate(0deg)";
  }
}
</script>

</body>
</html>
